<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Console</title>
    <link rel="stylesheet" type="text/css" href="./src/wmks-all.css" />
    <link rel="stylesheet" href="./src/style.css">
</head>

<body>
    <script type="text/javascript" src="./src/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="./src/jquery-ui.min.js"></script>
    <script type="text/javascript" src="./src/wmks.min.js"></script>
    <div id="wmksContainer" style="position:absolute;width:100%;height:100%"></div>
    <div id="statusMessage">
        <h2>Connection error</h2>
        <p>
                <div>You need to use chromium based browser</div>
                <div>Make sure at your browser support JavaScript</div>
                <div>To fix the issue, please open following URL <a href="https://@Model.vcenterIp/" target="_blank">https://@Model.vcenterIp/</a> and accept the certificate.</div>
        </p>
    </div>
    <script>
        const vmContainer = document.getElementById('wmksContainer');
        const statusMessage = document.getElementById('statusMessage');

        var wmks = WMKS.createWMKS("wmksContainer", {})
            .register(WMKS.CONST.Events.CONNECTION_STATE_CHANGE, function (event, data) {
                if (data.state == WMKS.CONST.ConnectionState.CONNECTED) {
                    console.log("connection state change : connected");
                    vmContainer.style.display = 'block';
                    statusMessage.style.display = 'none';
                }
                else {
                    console.log(data.state);
                    vmContainer.style.display = 'none';
                    statusMessage.style.display = 'block';
                }
            });
        wmks.connect("@Model.url"); 
    </script>
</body>

</html>